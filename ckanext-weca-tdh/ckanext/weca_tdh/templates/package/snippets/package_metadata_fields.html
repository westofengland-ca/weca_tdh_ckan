{% ckan_extends %}

{% block package_metadata_fields %}
  {% block package_metadata_fields_availability %}
  <div class="form-group control-medium">
    <label for="field-availability" class="form-label">{{ _('Dataset Availability') }}</label>
    <div class="controls">
      <select id="field-availability" name="availability" data-module="autocomplete">
        {% for option in [('available', _('Available')), ('upcoming', _('Coming Soon'))] %}
          <option value="{{ option[0] }}" {% if option[0] == data.availability|trim %}selected="selected"{% endif %}>{{ option[1] }}</option>
        {% endfor %}
      </select>
    </div>
  </div>
  {% endblock %}

  {% block package_metadata_fields_featured %}
  <div class="form-group control-medium">
    <div class="controls">
      {% set options = [{'value': False, 'text': _('No')}, {'value': True, 'text': _('Yes')}]%}
      {{ form.select('featured', id='field-featured', label='Feature on Home Page', options=options, selected=data.featured) }}
    </div>
  </div>
  {% endblock %}

  {% block package_metadata_fields_data_quality %}
    <div class="form-group control-medium">
      <label for="field-dq" class="form-label">{{ _('Data Quality Category') }}</label>
      <div class="controls">
        <select id="field-dq" name="data_quality" data-module="autocomplete">
          <option value="0" {% if data.get('data_quality', "0") == "0" %} selected="selected" {% endif %}>{{ _('Unclassified') }}</option>
          <option value="1" {% if data.get('data_quality', "0") == "1" %} selected="selected" {% endif %}>{{ _('Poor') }}</option>
          <option value="2" {% if data.get('data_quality', "0") == "2" %} selected="selected" {% endif %}>{{ _('Moderate') }}</option>
          <option value="3" {% if data.get('data_quality', "0") == "3" %} selected="selected" {% endif %}>{{ _('Good') }}</option>
          <option value="4" {% if data.get('data_quality', "0") == "4" %} selected="selected" {% endif %}>{{ _('Excellent') }}</option>
        </select>
      </div>
    </div>
  {% endblock %}
  {% block package_metadata_fields_data_quality_score %}
    <div class="form-group control-medium">
      <label for="field-dqs" class="form-label">{{ _('Data Quality Score') }}</label>
      <div class="controls">
        {% set value = data.get('data_quality_score') %}
        <input value="{{value}}" type="number" placeholder="0 - 100" id="field-dqs" name="data_quality_score" class="form-control" 
          min="0" max="100" onkeyup="if(value<0) value=0; if(value>100) value=100;">
      </div>
    </div>
  {% endblock %}
  {% block package_metadata_fields_last_reviewed %}
    <div class="form-group control-medium">
      <label for="field-lr" class="form-label">{{ _('Last Review Date') }}</label>
      <div class="controls">
        {% set value = data.get('last_reviewed', "01/01/24") %}
        <input value="{{value}}" type="date" id="field-lr" name="last_reviewed" class="form-control">
      </div>
    </div>
  {% endblock %}

  {% block package_metadata_fields_user_group %}
    <div class="form-group control-medium">
      <label for="field-ug" class="form-label">{{ _('User Group') }}</label>
      <div class="controls">
        {% set value = data.get('user_group', "") %}
        <input value="{{value}}" type="text" placeholder="tdh_<groupname>" id="field-ug" name="user_group" class="form-control">

        <span class="info-block">
          <i class="fa fa-info-circle"></i>
            {{ _('Azure AD/Entra ID user management group used to control dataset access') }}
        </span>
      </div>
    </div>
  {% endblock %}

  {{ super() }}
{% endblock %}

{% block package_metadata_fields_custom %}
{# remove custom fields #}
{% endblock %}
